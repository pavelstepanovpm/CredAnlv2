#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –≤–µ—Ç–æ–∫ –∏ —Ç–µ–≥–æ–≤ –Ω–∞ GitHub

echo "üöÄ –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –≤–µ—Ç–æ–∫ –∏ —Ç–µ–≥–æ–≤ –Ω–∞ GitHub..."
echo "=================================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GitHub
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ GitHub..."
if ! git remote get-url origin > /dev/null 2>&1; then
    echo "‚ùå –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
    echo "   –í—ã–ø–æ–ª–Ω–∏—Ç–µ: git remote add origin https://github.com/pavelstepanovpm/CredAnlv2.git"
    exit 1
fi

echo "‚úÖ –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
git remote -v

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–µ—Ç–æ–∫ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
branches=("main" "develop" "feature/covenant-badge" "demo/multiple-files" "feature/new-features" "hotfix/bug-fixes")

echo ""
echo "üì§ –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Ç–∫–∏..."

# –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞–∂–¥—É—é –≤–µ—Ç–∫—É
for branch in "${branches[@]}"; do
    echo ""
    echo "üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–µ—Ç–∫—É: $branch"
    
    # –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–µ—Ç–∫—É
    if git checkout "$branch" > /dev/null 2>&1; then
        echo "‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –Ω–∞ $branch"
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Ç–∫—É
        echo "üì§ –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Ç–∫—É $branch –Ω–∞ GitHub..."
        if git push origin "$branch"; then
            echo "‚úÖ –í–µ—Ç–∫–∞ $branch –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"
        else
            echo "‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–µ—Ç–∫–∏ $branch"
        fi
    else
        echo "‚ö†Ô∏è  –í–µ—Ç–∫–∞ $branch –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
    fi
done

echo ""
echo "üè∑Ô∏è  –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–≥–∏..."
if git push --tags; then
    echo "‚úÖ –¢–µ–≥–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–≥–æ–≤"
fi

echo ""
echo "üîç –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–µ –≤–µ—Ç–∫–∏
echo "üìã –£–¥–∞–ª–µ–Ω–Ω—ã–µ –≤–µ—Ç–∫–∏:"
git branch -r

echo ""
echo "üè∑Ô∏è  –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏:"
git tag -l

echo ""
echo "üéâ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo "üîó –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/pavelstepanovpm/CredAnlv2"
echo ""
echo "üìã –ß—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ:"
echo "‚úÖ –í—Å–µ –≤–µ—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ GitHub"
echo "‚úÖ –í—Å–µ —Ç–µ–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ GitHub"
echo "‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è"
echo "‚úÖ Backend (FastAPI + Quantlib)"
echo "‚úÖ Frontend (React/TypeScript)"
echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–∫—Ä–∏–ø—Ç—ã"
echo ""
echo "üåê –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ GitHub:"
echo "   https://github.com/pavelstepanovpm/CredAnlv2"
